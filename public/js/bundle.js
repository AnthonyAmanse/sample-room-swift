!function(e){function n(o){if(t[o])return t[o].exports;var r=t[o]={exports:{},id:o,loaded:!1};return e[o].call(r.exports,r,r.exports,n),r.loaded=!0,r.exports}var t={};n.m=e,n.c=t,n.p="",n(0)}([function(e,n){var t=angular.module("gameOnApp",[]);t.controller("GameOnController",function(e,n){function t(){return o.disconnect(),null}var o=this,r=null,s="ws://"+window.document.location.host+"/room";o.messages=[],o.inputMessage={value:""},o.connected={value:!1},o.isClient={value:!1};var l="GameOn Swift room";o.connect=function(){o.connected.value=!0,console.log("url: "+s),console.log("websocket: "+r),r=new WebSocket(s),console.log("new websocket: "+r),r.connected&&(r.onerror=function(e){null!==r&&(r.close(),r=null)}),r.onclose=function(e){null!==r&&(r.close(),r=null)},r.onmessage=function(n){if(null!==r){if(o.extractChatMsg(n.data)){var t=o.extractJson(n.data,"username");o.messages.push({origin:"server",username:t,content:n.data}),e(function(){var e=document.getElementById("autoscroll");e.scrollTop=e.scrollHeight},0,!1)}}}},o.disconnect=function(){o.connected.value=!1,o.messages=[],null!==r&&(r.close(),r=null)},o.send=function(n){if(null!==r){if(o.extractChatMsg(n)){var t=o.extractJson(n,"username");o.messages.push({origin:"client",username:t,content:n}),e(function(){var e=document.getElementById("autoscroll");e.scrollTop=e.scrollHeight},0,!1)}r.send(n)}},o.evaluateInput=function(){var e={username:"Robert",userId:"dummyId"},n=o.inputMessage.value;o.inputMessage.value="",n.indexOf("clear")>=0?o.messages=[]:(e.content=n,o.send("room,"+l+","+JSON.stringify(e)))},o.hello=function(){var e={username:"webtest",userId:"dummyId",version:2};o.send("roomHello,"+l+","+JSON.stringify(e))},o.goodbye=function(){var e={username:"webtest",userId:"dummyId"};o.send("roomGoodbye,"+l.value+","+JSON.stringify(e))},o.join=function(){var e={username:"webtest",userId:"dummyId",version:2};o.send("roomJoin,"+l.value+","+JSON.stringify(e))},o.part=function(){var e={username:"webtest",userId:"dummyId"};o.send("roomPart,"+l.value+","+JSON.stringify(e))},o.extractJson=function(e,n){var t=e.split(",");for(var o in t)if(t[o].indexOf(n)!=-1){var r=t[o].split(":"),s=r[1].replace(/\"/g,"").replace("}","");return s}return null},o.extractChatMsg=function(e){if(0==e.indexOf("room")){var n=e.split(",");for(var t in n)if(n[t].indexOf("content")!=-1){var o=n[t].split(":"),r=o[1].replace(/\"/g,"");if("/"!=r.charAt(0)){var s=r.replace("/","");return s=s.replace("}","")}}}return null},n.onbeforeunload=t,o.connect()}),t.directive("ngEnter",function(){return function(e,n,t){n.bind("keydown keypress",function(n){13===n.which&&(e.$apply(function(){e.$eval(t.ngEnter)}),n.preventDefault())})}})}]);